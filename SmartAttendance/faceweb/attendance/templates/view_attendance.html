{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance Records</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 min-h-screen text-white font-sans">

  <!-- Header -->
  <header class="text-center py-10">
    <h2 class="text-4xl font-bold mb-2">Attendance Records</h2>
    <p class="text-lg text-gray-100">Click on a student to view full attendance history</p>
  </header>

  <!-- ✅ Message Alerts -->
  {% if messages %}
    <div class="px-10 mb-6">
      {% for message in messages %}
        <div class="p-3 mb-3 rounded-md text-center shadow-md 
          {% if message.tags == 'success' %}
            bg-green-100 text-green-700 border border-green-400
          {% else %}
            bg-red-100 text-red-700 border border-red-400
          {% endif %}
        ">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Cards Container -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 px-10 pb-24">
    {% for entry in students %}
      <a href="{% url 'student_detail' entry.name %}" class="block">
        <div class="bg-white text-black rounded-2xl shadow-lg p-6 hover:scale-105 transform transition duration-300 ease-in-out flex flex-col items-center">
          
          <!-- ✅ Student Image -->
          {% if entry.image_base64 %}
            <img src="data:image/jpeg;base64,{{ entry.image_base64 }}" 
                 alt="{{ entry.name }}" 
                 class="w-28 h-28 object-cover rounded-full border-4 border-purple-500 mb-4 shadow-md">
          {% else %}
            <div class="w-28 h-28 rounded-full bg-gray-300 flex items-center justify-center mb-4 text-gray-600">
              No Image
            </div>
          {% endif %}

          <!-- ✅ Student Info -->
          <h3 class="text-xl font-semibold mb-1">{{ entry.name }}</h3>
          <p class="text-sm text-gray-700">Last seen:</p>
          <p class="text-md font-medium text-gray-900">{{ entry.last_timestamp }}</p>
        </div>
      </a>
    {% empty %}
      <p class="col-span-full text-center text-xl text-white">No attendance records found.</p>
    {% endfor %}
  </div>

  <!-- Footer -->
  <footer class="text-center fixed bottom-0 left-1/2 transform -translate-x-1/2 mb-4 text-sm text-white">
    &copy; 2025 Sirisha. All Rights Reserved.
  </footer>

</body>
</html>
